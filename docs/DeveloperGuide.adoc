= modsUni - Developer Guide
:site-section: DeveloperGuide
:toc:
:toc-title:
:toc-placement: preamble
:sectnums:
:imagesDir: images
:stylesDir: stylesheets
:xrefstyle: full
ifdef::env-github[]
:tip-caption: :bulb:
:note-caption: :information_source:
:warning-caption: :warning:
:experimental:
endif::[]
:repoURL: https://github.com/CS2103-AY1819S1-W17-2/main/tree/master/

By: `Team W17-2`      Since: `Sep 2018`      Licence: `MIT`

== Setting up

=== Prerequisites

. *JDK `9`* or later
+
[WARNING]
JDK `10` on Windows will fail to run tests in <<UsingGradle#Running-Tests, headless mode>> due to a https://github.com/javafxports/openjdk-jfx/issues/66[JavaFX bug].
Windows developers are highly recommended to use JDK `9`.

. *IntelliJ* IDE
+
[NOTE]
IntelliJ by default has Gradle and JavaFx plugins installed. +
Do not disable them. If you have disabled them, go to `File` > `Settings` > `Plugins` to re-enable them.


=== Setting up the project in your computer

. Fork this repo, and clone the fork to your computer
. Open IntelliJ (if you are not in the welcome screen, click `File` > `Close Project` to close the existing project dialog first)
. Set up the correct JDK version for Gradle
.. Click `Configure` > `Project Defaults` > `Project Structure`
.. Click `New...` and find the directory of the JDK
. Click `Import Project`
. Locate the `build.gradle` file and select it. Click `OK`
. Click `Open as Project`
. Click `OK` to accept the default settings
. Open a console and run the command `gradlew processResources` (Mac/Linux: `./gradlew processResources`). It should finish with the `BUILD SUCCESSFUL` message. +
This will generate all resources required by the application and tests.
. Open link:{repoURL}/src/main/java/seedu/modsuni/storage/XmlAdaptedCredential.java[`XmlAdaptedCredential.java`] and link:{repoURL}/src/main/java/seedu/modsuni/ui/MainWindow.java[`MainWindow.java`] and check for any code errors
.. Due to an ongoing https://youtrack.jetbrains.com/issue/IDEA-189060[issue] with some of the newer versions of IntelliJ, code errors may be detected even if the project can be built and run successfully
.. To resolve this, place your cursor over any of the code section highlighted in red. Press kbd:[ALT + ENTER], and select `Add '--add-modules=...' to module compiler options` for each error
. Repeat this for the test folder as well (e.g. check link:{repoURL}/src/test/java/seedu/modsuni/commons/util/XmlUtilTest.java[`XmlUtilTest.java`] and link:{repoURL}/src/test/java/seedu/modsuni/ui/HelpWindowTest.java[`HelpWindowTest.java`] for code errors, and if so, resolve it the same way)

=== Verifying the setup

. Run the `seedu.modsuni.MainApp` and try a few commands
. <<Testing,Run the tests>> to ensure they all pass.

=== Configurations to do before writing code

==== Configuring the Coding Style

This project follows https://github.com/oss-generic/process/blob/master/docs/CodingStandards.adoc[oss-generic coding standards]. IntelliJ's default style is mostly compliant with ours but it uses a different import order from ours. To rectify,

. Go to `File` > `Settings...` (Windows/Linux), or `IntelliJ IDEA` > `Preferences...` (macOS)
. Select `Editor` > `Code Style` > `Java`
. Click on the `Imports` tab to set the order

* For `Class count to use import with '\*'` and `Names count to use static import with '*'`: Set to `999` to prevent IntelliJ from contracting the import statements
* For `Import Layout`: The order is `import static all other imports`, `import java.\*`, `import javax.*`, `import org.\*`, `import com.*`, `import all other imports`. Add a `<blank line>` between each `import`

Optionally, you can follow the <<UsingCheckstyle#, UsingCheckstyle.adoc>> document to configure Intellij to check style-compliance as you write code.

==== Updating Documentation to match your fork

After forking the repo, the documentation will still have the modsUni branding and refer to the `CS2103-AY1819S1-W17-2/main` repo.

If you plan to develop this fork as a separate product (i.e. instead of contributing to `CS2103-AY1819S1-W17-2/main`), you should do the following:

. Configure the <<Docs-SiteWideDocSettings, site-wide documentation settings>> in link:{repoURL}/build.gradle[`build.gradle`], such as the `site-name`, to suit your own project.

. Replace the URL in the attribute `repoURL` in link:{repoURL}/docs/DeveloperGuide.adoc[`DeveloperGuide.adoc`] and link:{repoURL}/docs/UserGuide.adoc[`UserGuide.adoc`] with the URL of your fork.

==== Setting Up CI

Set up Travis to perform Continuous Integration (CI) for your fork. See <<UsingTravis#, UsingTravis.adoc>> to learn how to set it up.

After setting up Travis, you can optionally set up coverage reporting for your team fork (see <<UsingCoveralls#, UsingCoveralls.adoc>>).

[NOTE]
Coverage reporting could be useful for a team repository that hosts the final version but it is not that useful for your personal fork.

Optionally, you can set up AppVeyor as a second CI (see <<UsingAppVeyor#, UsingAppVeyor.adoc>>).

[NOTE]
Having both Travis and AppVeyor ensures your App works on both Unix-based platforms and Windows-based platforms (Travis is Unix-based and AppVeyor is Windows-based)

==== Getting Started with Coding

When you are ready to start coding,

1. Get some sense of the overall design by reading <<Design-Architecture>>.
2. Take a look at <<GetStartedProgramming>>.

== Design

[[Design-Architecture]]
=== Architecture

.Architecture Diagram
image::Architecture.png[width="600"]

The *_Architecture Diagram_* given above explains the high-level design of the App. Given below is a quick overview of each component.

[TIP]
The `.pptx` files used to create diagrams in this document can be found in the link:{repoURL}/docs/diagrams/[diagrams] folder. To update a diagram, modify the diagram in the pptx file, select the objects of the diagram, and choose `Save as picture`.

`Main` has only one class called link:{repoURL}/src/main/java/seedu/modsuni/MainApp.java[`MainApp`]. It is responsible for,

* At app launch: Initializes the components in the correct sequence, and connects them up with each other.
* At shut down: Shuts down the components and invokes cleanup method where necessary.

<<Design-Commons,*`Commons`*>> represents a collection of classes used by multiple other components. Two of those classes play important roles at the architecture level.

* `EventsCenter` : This class (written using https://github.com/google/guava/wiki/EventBusExplained[Google's Event Bus library]) is used by components to communicate with other components using events (i.e. a form of _Event Driven_ design)
* `LogsCenter` : Used by many classes to write log messages to the App's log file.

The rest of the App consists of four components.

* <<Design-Ui,*`UI`*>>: The UI of the App.
* <<Design-Logic,*`Logic`*>>: The command executor.
* <<Design-Model,*`Model`*>>: Holds the data of the App in-memory.
* <<Design-Storage,*`Storage`*>>: Reads data from, and writes data to, the hard disk.

Each of the four components

* Defines its _API_ in an `interface` with the same name as the Component.
* Exposes its functionality using a `{Component Name}Manager` class.

For example, the `Logic` component (see the class diagram given below) defines it's API in the `Logic.java` interface and exposes its functionality using the `LogicManager.java` class.

.Class Diagram of the Logic Component
image::LogicClassDiagram.png[width="800"]

[discrete]
==== Events-Driven Nature of the Design

The _Sequence Diagram_ below shows how the components interact for the scenario where the user issues the register command.

.Component interactions for `register` command (part 1)
image::SDforRegisterCommandOverview.png[width="800"]

[NOTE]
Note how the `Model` simply raises a `AddressBookChangedEvent` when the Address Book data are changed, instead of asking the `Storage` to save the updates to the hard disk.

The diagram below shows how the `EventsCenter` reacts to that event, which eventually results in the updates being saved to the hard disk and the status bar of the UI being updated to reflect the 'Last Updated' time.

.Component interactions for `register` command (part 2)
image::SDforRegisterCommandPart2.png[width="800"]

[NOTE]
Note how the event is propagated through the `EventsCenter` to the `Storage` and `UI` without `Model` having to be coupled to either of them. This is an example of how this Event Driven approach helps us reduce direct coupling between components.

The sections below give more details of each component.

[[Design-Ui]]
=== UI Component

.Structure of the UI Component
image::UiClassDiagram.png[width="800"]

*API* : link:{repoURL}/src/main/java/seedu/modsuni/ui/Ui.java[`Ui.java`]

The UI consists of a `MainWindow` that is made up of parts e.g.`CommandBox`, `ResultDisplay`, `PersonListPanel`, `StatusBarFooter`, `BrowserPanel` etc. All these, including the `MainWindow`, inherit from the abstract `UiPart` class.

The `UI` component uses JavaFx UI framework. The layout of these UI parts are defined in matching `.fxml` files that are in the `src/main/resources/view` folder. For example, the layout of the link:{repoURL}/src/main/java/seedu/modsuni/ui/MainWindow.java[`MainWindow`] is specified in link:{repoURL}/src/main/resources/view/MainWindow.fxml[`MainWindow.fxml`]

The `UI` component,

* Executes user commands using the `Logic` component.
* Binds itself to some data in the `Model` so that the UI can auto-update when data in the `Model` change.
* Responds to events raised from various parts of the App and updates the UI accordingly.

[[Design-Logic]]
=== Logic Component

[[fig-LogicClassDiagram]]
.Structure of the Logic Component
image::LogicClassDiagram.png[width="800"]

*API* :
link:{repoURL}/src/main/java/seedu/modsuni/logic/Logic.java[`Logic.java`]

.  `Logic` uses the `ModsUniParser` class to parse the user command.
.  This results in a `Command` object which is executed by the `LogicManager`.
.  The command execution can affect the `Model` (e.g. adding a person) and/or raise events.
.  The result of the command execution is encapsulated as a `CommandResult` object which is passed back to the `Ui`.

Given below is the Sequence Diagram for interactions within the `Logic` component for the `execute("delete 1")` API call.

.Interactions Inside the Logic Component for the `delete 1` Command
image::DeletePersonSdForLogic.png[width="800"]

[[Design-Model]]
=== Model Component

.Structure of the Model Component
image::ModelClassDiagram.png[width="800"]

*API* : link:{repoURL}/src/main/java/seedu/modsuni/model/Model.java[`Model.java`]

The `Model`,

* stores a `UserPref` object that represents the user's preferences.
* stores the Address Book data.
* exposes an unmodifiable `ObservableList<Person>` that can be 'observed' e.g. the UI can be bound to this list so that the UI automatically updates when the data in the list change.
* does not depend on any of the other three components.

[[Design-Storage]]
=== Storage Component

.Structure of the Storage Component
image::StorageClassDiagram.png[width="800"]

*API* : link:{repoURL}/src/main/java/seedu/modsuni/storage/Storage.java[`Storage.java`]

The `Storage` component,

* can save `UserPref` objects in json format and read it back.
* can save the Address Book data in xml format and read it back.

[[Design-Commons]]
=== Common Classes

Classes used by multiple components are in the `seedu.modsuni.commons` package.

== Implementation

This section describes some noteworthy details on how certain features are implemented.

// tag::useraccountmanagement[]
=== User Account Management

User Account Management involves mainly the authentication process of the users.
Only once they are authenticated, will their respective user data be loaded into the application.
Additionally, it is only by registering/logging in will users be able to access and manipulate their account details. +
This section will describe in detail the Current Implementation and the Design Considerations of the User Account Management feature. +

Figure 1(shown below) describes the general flow of the user account management in an activity diagram.

image::ADforUserAccountManagement.png[width="800",align="center"]
[.text-center]
_Figure 1. Activity Diagram for User Account Management._

==== Current Implementation

The User Account Management mechanism is facilitated by the following classes:

* `Credential` +
It stores `Username` and `Password` of the `User` class. +
Additionally, it implements the following operation(s):

** `Credential#isSameCredential(...)` -- Determines if there already exists a `Credential` with the same username in the `CredentialStore`

* `CredentialStore` +
It stores the credentials and the corresponding username in a `HashMap` object. +
Additionally, it implements the following operations(s):

** `CredentialStore#addCredential(...)` -- Adds the input credential into the credential store
** `CredentialStore#removeCredential(...)` -- Removes the input credential from the credential store.
** `CredentialStore#isVerifiedCredential(...)` -- Checks if there exists the same credential with the matching username and passwords. Returns `true` if the input credential is verified.

[NOTE]
The above operations are exposed in the `Model` interface as `Model#addCredential()`, `Model#removeCredential()` and `Model#isVerifiedCredential()` respectively.

* `User` +
Contains all the necessary data contained within a single user. +
Currently, there are two Users, each defined by their `Roles`; namely `Student` and `Admin` as defined in the enum class `Role.java`

*** `Student` +
Refers to the majority of the users. It stores variables pertaining to a student user.

*** `Admin` +
Refers to the application managers. It stores variables pertaining to an administrator.

Figure 2(shown below) is the Class Diagrams illustrating the inheritance between `User`, `Student` and `Admin`

image::UserClassDiagram.png[width="500",align="center"]
[.text-center]
_Figure 2. User, Student and Admin Class Diagrams_

[NOTE]
Each User types contain different class-variables. Additionally, the sets of commands available for either `User` types are limited to their respective `Role`

===== Implementation of the register feature

The `register` feature is facilitated by the `RegisterCommand` class.
It allows for students to sign up for a modsUni account, which is required to use the application.

[NOTE]
Registering only applies to students. For the creation of `Admin` Accounts, only existing administrators can create another `Admin` account

The `RegisterCommand` extends the `Command` class. Figure 3(shown below) depicts the UML representation of the `RegisterCommand`. +

image::RegisterCommandUML.png[width="350",align="center"]
[.text-center]
_Figure 3. UML Diagram of `RegisterCommand`._

Parsing of command is performed by `RegisterCommandParser`,
which returns a `RegisterCommand` object after parsing Username, Password, Name, Path to Profile Picture, Enrollment Date, Major(s) and Minor(s).
The Sequence Diagram shown below in Figure 4 illustrates the interactions between the `Logic` & `Model` components when the `RegisterCommand` is being executed.

image::SDforRegisterCommandLogicAndModel.png[width="900",align="center"]
[.text-center]
_Figure 4. Sequence Diagram for the interaction between `Logic` and `Model` Components when executing `RegisterCommand`._

Figure 5 below shows the high-level sequence diagram of the command execution.

image::SDforRegisterCommandOverview.png[width="800",align="center"]
[.text-center]
_Figure 5. High-Level Sequence diagram of registering a new student account._

Given below is an example usage scenario and how the register mechanism behaves at each step:

Step 1. The user launches the application for the first time. At start up, the `currentUser` in `Model` is not yet instantiated,
this would prevent any commands aside from `register` and `login` to be available to the user. +

[NOTE]
`currentUser` refers to the user account currently loaded in the modsUni Application.

Step 2. The user executes `register user/demo ...` to register a new `Student` account.
The `register` command will call `Model#addCredential(...)` and `Model#setCurrentUser(...)`. +

[NOTE]
A new `Student` would be initialized and automatically set as the `currentUser`, enabling the user to perform additional commands automatically. +


===== Implementation of the login feature

The `login` feature is facilitated by the `LoginCommand` class.
It allows for students to log into their existing modsUni account, granting them access to their respective user data. +

The `LoginCommand` extends the `Command` class. Figure 1(shown below) depicts the UML representation of the `LoginCommand`. +

image::LoginCommandUML.png[width="350",align="center"]
[.text-center]
_Figure 1. UML Diagram of `LoginCommand`._

Parsing of command is performed by `LoginCommandParser`, which returns a `LoginCommand` after parsing the username and password inputs.
The Sequence Diagram shown below in Figure 2 illustrates the interactions between the `Logic` & `Model` components when the `LoginCommand` is being executed.

image::SDforLoginCommandLogicAndModel.png[width="900",align="center"]
[.text-center]
_Figure 2. Sequence Diagram for the interaction between `Logic` and `Model` Components when executing `LoginCommand`._

Figure 3 below shows the high-level sequence diagram of the command execution.

image::SDforLoginCommandOverview.png[width="800",align="center"]
[.text-center]
_Figure 3. High-Level Sequence Diagram of the login process._

Given below is an example usage scenario and how the login mechanism behaves at each step:

1. The user launches the application. As explained earlier, since the `currentUser` in `Model` is not yet instantiated,
the user will only be able to execute either the `register` or `login` command. +

2. Having already registered an account, the user can proceed to execute `login user/demo pass/#Qwerty123` to log in to their account.
The `login` command will call `Model#isVerifiedCredential(...)` to determine if the user input matches a credential in `CredentialStore`. +

3. Should the credential be valid and verified, a `User` will be loaded from a the default `userData.xml` file.
Subseqently, the `Model#setCurrentUser(...)` will be called to set the loaded user data as the `currentUser`. +

4. Should the credential not be valid or does not match an existing credential in the `CredentialStore`, the user will simply be shown a failure message.

===== Implementation of the edit feature

The `edit` feature is facilitated by the `EditStudentCommand` class.
It allows for students to edit their existing modsUni account, granting them the ability
to modify personal details. +

The `EditStudentCommand` extends the `Command` class. Figure 1(shown below) depicts the UML representation of the `EditStudentCommand`. +

image::EditStudentCommandUML.png[width="350",align="center"]
[.text-center]
_Figure 1. UML Diagram of `EditStudentCommand`._

Parsing the command is performed by `EditStudentCommandParser`, which returns a `EditCommand` after parsing the user input.
The Sequence Diagram shown below in Figure 2 illustrates the interactions between the `Logic` & `Model` components when the `EditStudentCommand` is being executed.

image::SDforEditStudentCommandLogicAndModel.png[width="900",align="center"]
[.text-center]
_Figure 2. Sequence Diagram for the interaction between `Logic` and `Model` Components when executing `EditStudentCommand`._

Figure 3 below shows the high-level sequence diagram of the command execution:

image::SDforEditStudentCommand.png[width="800",align="center"]
[.text-center]
_Figure 3. High-Level Sequence Diagram of the edit process._

Given below is an example usage scenario and how the edit mechanism behaves at each step:

1. The user launches the application. Depending on whether the user already has an account registered, he would proceed to login. +
2. Now that the `currentUser` is being loaded. The student can proceed to execute an edit command `edit n/demo enroll/03/08/2017` +
At this point,`ModsUniParser` would instantiate `EditStudentCommandParser` which would parse the `edit` command.
3. `EditStudentCommandParser` would instantiate `EditStudentDescriptor`. `EditStudentDescriptor` contains the respective user details that is provided in the user input. +
[NOTE]
`EditStudentDescriptor` contains *only* the details as provided in the user input and will be used in `EditCommand#execute()` to update `currentUser`

4. `EditStudentCommandParser` would return a `EditCommand` with the descriptor class. Subsequently, `EditCommand#execute()` would be called.
5. At this point, `EditCommand#createEditedStudent(...)` would be called constructing a new Student object, with the `currentUser` and the descriptor.
6. Finally, `Model#setCurrentUser(...)` would be called to update `currentUser` with the new details.
[NOTE]
Upon the successful execute of the `edit` command, `UserTab` would also be updated with the new user details.

==== Design Considerations

===== Aspect: How user credentials are stored.

* **Alternative 1 (current choice):** Usage of a separate `CredentialStore` class to store all user credentials.
** Pros: This allows for better security through abstraction. By having the user credentials stored away from the `User`, they(users & malicious attackers) will not be able to explicitly manipulate the secured data outside the given parameters.
** Cons: Additional memory resources is used to store the data structures.
* **Alternative 2:** Storing the user credentials within the `User` class.
** Pros: This alternative is easier to implement.
** Cons: Sacrifices security for ease of implementation.

===== Aspect: Data structure to support the user account features.

* **Alternative 1 (current choice):** A `HashMap` is used to store the credentials, using a username-credential(`String->Credential`) key-value pair.
** Pros: Considering that there is no possibility of duplicate usernames, utilizing a `HashMap` data structure would improve optimization when verifying a specific credential, with an _O(1)_ search time.
** Cons: Additional memory resources is required for the usage of complex data structures.
* **Alternative 2:** Using a `List` of Credentials
** Pros: Will require less memory resources. Additionally, it is easier to implement.
** Cons: Should more and more user adopt the application, the increased volume of user credentials would result in an _O(n)_ operation when verifying a user credential.
// end::useraccountmanagement[]

// tag::generate[]
=== Generate

Generate is a command for student users to generate a schedule containing the modules to take in each
semester during their entire university candidature.

[NOTE]
The generate command can only be executed by users of type `Student`.

The section below will describe in detail the current implementation and design considerations of the
generate feature.

==== Current Implementation

The generate command is facilitated by the `GenerateCommand` class and the following methods in the Model
class:

* `Model#isStudent()` -- This method checks if the current user is a student.
* `Model#canGenerate()` -- This method checks if it is possible to generate a schedule.
* `Model#generateSchedule()` -- This method generates a schedule.

It generates a schedule based on the student’s staged modules. It also makes use of the `Generate`
class from the `Logic` package to create a schedule.

The `GenerateCommand` class extends from the `Command` class. Figure 1 as shown below depicts the UML
diagram for the `GenerateCommand` class.

image::GenerateCommandUML.png[width="250]
_Figure 1. GenerateCommand UML Diagram_

In the execute method of the Generate command, it will first check if the current user is a Student. Next
it will proceed on to check if all prerequisites of the student’s staged modules have been met. It does the
 prerequisite checks using the student’s taken module list. If the conditions are satisfactory, it will
 generate a schedule. Figure 2(shown below) shows the sequence diagram when executing the `GenerateCommand`.

image::SDforGenerateCommandLogicAndModel.png[width="250]
_Figure 2. Sequence diagram for the interaction between `Logic` and `Model` Components when executing
 `GenerateCommand`._

`GenerateCommand` uses multiple components of the modsUni application. Upon completion of generating the
schedule, two events will be posted. The first event is `MainWindowClearResourceEvent`. It will be posted to
inform the current UI that is in the main window to clear it's resources. The second event is
`NewGenerateResultAvailableEvent`. This event will show the UI for the schedule in the main window.
The sequence diagram shown below in Figure 3 illustrates the interactions between some of these components.

image::SequenceDiagramforGenerate.png[width="250]
_Figure 3. High Level Sequence Diagram for the `generate` command_

===== Example scenario of the generate command
Given below is an example usage scenario of how the generate command behaves:

The user launches the application for the first time and the `currentUser` will at this point be `null`.
Issuing the generate command at this point will throw an error message indicating to the user that they have
not registered an account or they are currently not logged in.

In order to utilise the generate command, the user must perform one of the following options:

* The user executes `register user/demo ...` to register a new `Student` account, followed by `addModuleS
cs1010`.

* The user executes `login user/demo pass/P@ssw0rd` to log into account, followed by `addModuleS cs1010`.

[NOTE]
A new `Student` would be initialized and automatically set as the `currentUser`. The module cs1010 would
also be added to the student's staged module list, enabling the student to perform generate command. +

==== Design Considerations

===== Aspect: How to generate a schedule

* **Alternative 1 (current choice):** Using of a separate `Generate` class to encapsulate the logic for
generating the schedule.
** Pros: Modification made to the generating of schedule does not affect the `Student` model.
** Cons: This approach adds complexity to the design of the application.
* **Alternative 2:** Adding the logic for generating the schedule to the `Student` model.
** Pros: This alternative is easier to implement.
** Cons: It breaks the single responsibility principle of the `Student` model.
// end::generate[]

// tag::usermodulemanagement[]
=== User Module Management
User Module Management involves mainly the interaction between users and their module lists.
A user is able to add and remove the module only if he is a student and the module exists in the database.
A user is allowed to search a module in the database.

The section below will describe in detail the Current Implementation and the Design Considerations of the User Module Management.

==== Current Implementation

The User Module Management is facilitated by the following classes:

* `Module` +
It stores all the necessary data contained within a single module.
The `code` of a module is considered as a key for searching and comparing purpose.
Two modules with the same `code` is considered as the same module.

* `ModuleList` +
It stores a `UniqueModuleList` which stores modules with unique code.

** `UniqueModuleList` stores an internal `ObservableList` for UI purpose.

* `User` +
It is the actor of the command. Add and remove commands are limited to a user whose `Roles` is `Student`.

** `Student` stores two `ModuleList` namely `modulesTaken` and `modulesStaged`, to store the modules chosen by the student.
*** `modulesTaken` represents the module student has taken before.
*** `modulesStaged` represents the module student wants to take later.

===== Implementation of the add feature

The `add` feature is facilitated by the `AddModuleToStudentStagedCommand` and `AddModuleToStudentTakenCommand` class.
It allows a user to add modules to his staged/taken module list by giving their code.

[NOTE]
A user is allowed to add only if: +
the user has logged in +
the user is a student +
the module exists in the database at this moment +
his staged/taken module list does not contains the module already

`AddModuleToStudentStaged/TakenCommand` extends the `Command` class. Figure 1(shown below) depicts the UML representation of `AddModuleToStudentStaged/TakenCommand`.

image::AddModuleToStudentStagedTakenCommandUML.png[width="400"]
_Figure 1. UML Diagram of `AddModuleToStudentStaged/TakenCommand`._

Parsing of command is performed by `AddModuleToStudentStaged/TakenCommandParser`,
which returns a `AddModuleToStudentStaged/TakenCommand` object after parsing input.

The Sequence Diagram shown below in Figure 2 illustrates the interactions between the `Logic` & `Model` components when `AddModuleToStudentStaged/TakenCommand` is being executed.

image::SDforAddModuleToStudentStagedTakenCommandLogicAndModel.png[width="900"]
_Figure 2. Sequence Diagram for the interaction between `Logic` and `Model` Components when executing `AddModuleToStudentStaged/TakenCommand`._

Figure 3 below shows the high-level sequence diagram of the command execution.

image::SDforAddModuleToStudentStagedTakenCommandOverview.png[width="800"]
_Figure 3. High-Level Sequence Diagram of adding a new module to the student's staged/taken module list._

Given below is an example usage scenario and how the adding mechanism behaves at each step: +
Step 1. The user launches the application. +
If it is the first time the user uses the application, after login as a student,
a `Student` model will be created, then `modulesTaken` and `modulesStaged` will be initialized as an empty `ModuleList`. +
If the user has logged in before, after login as a student, `modulesTaken` and `modulesStaged` will be recovered to the last saved version.

Step 2. After the user enters the command, `AddModuleToStudentStaged/TakenCommandParser` will create a `AddModuleToStudentStaged/TakenCommand`,
which contains two parameters. +
The first parameter is an `ArrayList` of `Code` to be searched. +
The second is a `String` contains the duplicate code entered by user.

Step 3. When the command is executed, `AddModuleToStudentStaged/TakenCommand` will call `Model#getCurrentUser()` and `Model#isStudent()` to check whether the user is a `Student`. +
`Model#searchCodeInDatabase(...)` to check whether the module exists in the database and update `toAdd` to the searched module,
`Model#hasModuleStaged/Taken(...)` to check whether the module has already existed in the student's staged/taken module list,
`Model#addModuleStaged/Taken(...)` to finally add the module to the student's staged/taken module list.

Step 4. After the module is added, the command will post an `ShowStaged/TakenTabRequestEvent` to show the user updated staged/taken module list. +
A `CommandResult` containing the log of execution result will be returned.

==== Design Considerations

===== Aspect: Search the module in the database

* **Alternative 1 (current choice):** Use `Code` as a key to search `moduleList` one by one.
** Pros: Easy to implement. Do not need to refactor `moduleList` to support this feature.
** Cons: Efficiency of searching is low. The time complexity is `O(N)`.
* **Alternative 2:** Refactor `moduleList` to be a `HashMap` for searching.
** Pros: Efficiency of searching will increase. The time complexity is `O(1)`.
** Cons: May not be cost-efficient to refactor `moduleList` only to support this feature.
// end::usermodulemanagement[]

// tag::moduledatabaseadministration[]
=== Module Database Administration

Module database administration is a series of commands that administrators can use to make necessary changes to keep
the module database up to date, or to cater to their own needs.

[NOTE]
The commands pertaining to module database administration can only be executed by users of type `Admin`.

Administrators can choose to add, remove or edit a module using `addModuleDB`, `removeModuleDB` and `editModule` respectively.
The changes will then be reflected
in both the module list in memory and in storage. Figure 1(shown below) describes the general flow of the administration
of the module database in an activity diagram.

image::ADforModuleDatabaseAdministration.png[width="800]
_Figure 1. Activity diagram for module database administration._

==== Current Implementation

The Module database administration mechanism is facilitated by `ModuleList` in `Model` via the following operations:

* `ModuleList#addModule(...)` -- This method adds a module to the module list.
* `ModuleList#removeModule(...)` -- This method removes a module from the module list.
* `ModuleList#hasModule(...)` -- This method checks if the given module already exists.
* `ModuleList#updateModule(...)` -- This method replace the specified target module with the given edited module.

[NOTE]
These operations are exposed in the `Model` interface as `Model#addModuleToDatabase(...)`,
`Model#removeModuleFromDatabase(...)`, `Model#hasModuleInDatabase(...)` and `Model#updateModule(...)` respectively.

Each module database administration commands is facilitated by a command class in modsUni. The following list
illustrates each command and their respective command class:

* `addModuleDB` -- `AddModuleToDatabaseCommand`
* `removeModuleDB` -- `RemoveModuleFromDatabaseCommand`
* `editModule` -- `EditModuleCommand`

**Adding module to database**

`addModuleDB` mechanism is facilitated by `AddModuleToDatabaseCommand`. It allows the addition of modules to database.

The `AddModuleToDatabaseCommand` extends for `Command`. Figure 2(shown below) depicts the UML representation of the
`AddModuleToDatabaseCommand`.

image::AddModuleToDatabaseCommandUML.png[width="400"]
_Figure 2. UML diagram of `AddModuleToDatabaseCommand`._

Parsing of command is performed by `AddModuleToDatabaseCommandParser`, which returns a `AddModuleToDatabaseCommand`
object after parsing ModuleCode, Title, Credit, Department, Description, AvailableSem and Prereq. Figure 3(shown below)
 shows the
sequence diagram of the `AddModuleToDatabaseCommandParser`.

image::SDforAddModuleToDatabaseCommandLogicAndModel.png[width="800"]
_Figure 3. Sequence diagram for the interaction between `Logic` and `Model` Components when executing
`AddModuleToDatabaseCommand`._

Figure 4(shown below) shows the high-level sequence diagram of the command execution.

image::SDforAddModuleToDatabaseCommand.png[width="800"]
_Figure 4. High-Level Sequence diagram of adding a module to database._

Given below is an example usage scenario and how the `addModuleDB` mechanism behaves at each step:

[NOTE]
For this example usage scenario, we assume that module "CS2109" did not exist in initially.

. An admin executes `addAdminDB` with valid arguments to add a module with module code “CS2109” to the module list.
The `addModuleDB` command calls `Model#addModuleToDatabase(...)`, causing the new model to be added to `ModuleList`
and subsequently update the `moduleList.xml` file with the new list.

. Another admin did not know the new module has already been added and tries to add the “CS2109” again by executing
`addModuleDB`. The `addModuleDB` command calls `Model#hasModuleInDatabase(...)`, causing a feedback to return,
informing the admin that the module already exists, and the module is not added.

**Deleting module from database**

`removeModuleDB` mechanism is facilitated by the `RemoveModuleFromDatabaseCommand` class. It allows `Admin` to remove
`Module` from the database.

The `RemoveModuleFromDatabaseCommand` extends for `Command`. Figure 5(shown below) depicts the UML representation of the
`RemoveModuleFromDatabaseCommand`.

image::RemoveModuleFromDatabaseCommandUML.png[width="400"]
_Figure 5. UML diagram of `RemoveModuleFromDatabaseCommand`._

Parsing of command is performed by `RemoveModuleFromDatabaseParser`, which returns a `RemoveModuleFromDatabase` object
after parsing moduleCode object. Figure 6(shown below) shows the sequence diagram of the `RemoveModuleFromDatabaseCommandParser`.

image::SDforRemoveModuleFromDatabaseCommandLogicAndModel.png[width="800"]
_Figure 6. Sequence diagram for the interaction between `Logic` and `Model` Components when executing
`RemoveModuleFromDatabase`._

Figure 7(shown below) shows the high-level sequence diagram of the command execution.

image::SDforRemoveModuleFromDatabaseCommand.png[width="800"]
_Figure 7. High-Level sequence diagram of removing a module from database._

Given below is an example usage scenario and how the `removeModuleDB` mechanism behaves at each step:

[NOTE]
For this example usage scenario, we assume that module "CS2109" already existed.

. An admin executes `removeAdminDB CS2109` to remove the module with module code “CS2109” from the module list.
The `removeModuleDB` command calls `Model#removeModuleFromDatabase(...)`, causing the module with module code “CS2109”
to be removed from the module list and subsequently update the `moduleList.xml` file with the new list.

. Another admin did not know that module “CS2109” has already been removed and tries to remove it again by
executing `removeModuleDB CS2109`. The `removeModuleDB` command returns a feedback informing the admin that the module
“CS2109” does not exist, and no changes is made to `ModuleList` and `moduleList.xml`.

**Editing module from database**

`editModule` mechanism is facilitated by the `EditModuleCommand` class. It allows `Admin` to edit `Module` from the
database.

The `EditModuleCommand` extends for `Command`. Figure 8(shown below) depicts the UML representation of the `EditModuleCommand`.

image::EditModuleCommandUML.png[width="400"]
_Figure 8. UML diagram of `EditModuleCommand`._

Parsing of command is performed by the `EditModuleCommandParser`, which returns a `EditModuleCommand` object after parsing
ModuleCode, Title, Credit, Department, Description, AvailableSem and Prereq. Figure 9(shown below) shows the sequence
diagram of the `EditModuleCommandParser`.

image::SDforEditModuleCommandLogicAndModel.png[width="800]
_Figure 9. Sequence diagram for the interaction between `Logic` and `Model` Components when executing `EditModule`._

Figure 10(shown below) shows the high-level sequence diagram of the command execution.

image::SDforEditModuleCommand.png[width="800"]
_Figure 10. High-level sequence diagram of editing a module from database._

==== Design Considerations

===== Aspect: How add & remove executes
* **Alternative 1 (current choice):** Interact with `moduleList` loaded from `moduleList.xml`.
** Pros: It is easy to implement.
** Cons: There may be performance issues in terms of memory usage.

* **Alternative 2:** Interact directly with `moduleList.xml`
** Pros: There will be less memory used for storing module list.
** Cons: Students may experience performance issues as they have to read from `moduleList.xml` in the hard disk every
time they execute command that requires reading the module list.

===== Aspect: Data structure for module list
* **Alternative 1 (current choice):** Using a list of `Module`.
** Pros: We can simply store `Module` objects directly into the list.
** Cons: We have to iterate through the list to check if a module exist, resulting in a linear time complexity.

* **Alternative 2:** Using a hash map with `ModuleCode` key and `Module` value.
** Pros: We can simply check if a `ModuleCode` key exists, which is fast as it is in constant time.
** Cons: Each module can only have one module code. Thus if a module have multiple module codes, we have to create
another module just to store the other module codes. This can be heavy on memory usage.
// end::moduledatabaseadministration[]

// tag::saveuser[]
=== Save User Feature
The save user feature involves mainly the saving process of a user's attributes.
A user can save their data only after they have logged in/registered an account.

[NOTE]
Data refers to a user's attributes listed in `SaveCommand` under the current implementation of the save user feature.

This section will describe in details the current implementation and the design considerations of the save user feature.

==== Current Implementation
The save mechanism is facilitated by the following classes:

* `SaveCommand` +
It stores the following attributes of a `User` object: +

** All user

*** Username +
    The username used for logging in.
*** Name +
    The name of the user.
*** Role +
    The role of the user.

** Admin

*** Salary +
    The salary of an administrator.
*** Employ Date +
    The employment date of an administrator.

** Student

*** Enrollment Date +
    The enrollment date of a student.
*** Major(s) +
    A list of the student's major.
*** Minor(s) +
    A list of the student's minor.
*** Modules Taken +
    A list of modules took by the student.
*** Modules Staged +
    A list of modules staged for the generation of candidature.

* `UserStorage` +
It provides methods to save the current user's attributes as well as to load a file containing previously saved data. +
Additionally, it implements the following operations:
** `StorageManager#saveUser(…​)` — Save the user's data into the specified file path.
** `StorageManager#readUser(…​)` — Reads the user's data from the specified file path.

===== Implementation of the save feature

The `save` mechanism of modsUni is facilitated by `SaveCommand` class and is event-driven.
It allows a user to save their data in modsUni as a XML file.

[NOTE]
Both admin and student can use the save feature.

The `SaveCommand` class extends from the `Command` class.
Figure 1 as shown below depicts the UML diagram for the `SaveCommand` class.

image::SaveCommandUML.png[width="250"]
_Figure 1. SaveCommand UML Diagram_

Parsing of command is performed by `SaveCommandParser`, which returns a `SaveCommand` object after parsing the save file path.
The sequence diagram shown below in Figure 2 illustrates the interactions between the Logic & Model components when the SaveCommand is being executed.

image::SDforSaveCommandLogicAndModel.png[width="900"]
_Figure 2. Sequence Diagram for the interaction between Logic and Model Components when executing SaveCommand_

The `save` feature uses multiple components of the modsUni application.
The sequence diagram shown below in Figure 3 illustrates the interactions between some of these components.
As seen from the diagram, the `SaveCommand` is driven by the `SaveUserChangedEvent`.

image::SequenceDiagramforSave.png[width="800"]
_Figure 3. High-Level Sequence Diagram for the `save sp/userdata.xml` command_

The `SaveUserChangedEvent` mentioned above is handled by the `Storage` component as shown in Figure 4.

image::SequenceDiagramforSaveEventHandling.png[width="650"]
_Figure 4. High-Level Sequence Diagram showing how the Storage component handles the `SaveUserChangedEvent` triggered by EventsCenter_

The Storage component makes use of `XmlUserStorage` class to write `User` to the file specified by the file path.
Both the conversion of `User` object to `XmlSerializableUser` as well as writing to file is shown in the following code snippet below:

[source, java]
----
public void saveUser(User user, Path filePath) throws IOException {
    // ... null checks ...
    FileUtil.createIfMissing(filePath);
    XmlFileStorage.saveDataToFile(filePath, new XmlSerializableUser(user));
}
----
The newly created `XmlSerializableUser` object is saved to the file using `XmlUtil#saveDataToFile(...)` as shown in the code snipplets below:

[source, java]
----
public static void saveDataToFile(Path file, XmlSerializableUser user) throws FileNotFoundException {
    try {
        XmlUtil.saveDataToFile(file, user);
    } catch (JAXBException e) {
        throw new AssertionError("Unexpected exception " + e.getMessage(), e);
    }
}
----


---
Given below is an example usage scenario and how the save mechanism behaves:

1. A student will first log into their account and add their preferred modules.

2. Upon issuing the command `save sp/userdata.xml`, the save command will call `Model#saveUserFile(...)` which then raises `SaveUserChangedEvent`. This `SaveUserChangedEvent` will be handled by `StorageManager`.

3. `StorageManager` then utilizes `XmlUserStorage#saveUser(...)` which saves the file to the file path specified by the user.


[TIP]
A new registered `Student` would be initialized and automatically logged in which enables the student to perform the save command. +


==== Design Considerations

===== Aspect: Data to save

* **Alternative 1 (current choice):** Saves the entire `User` object.
** Pros: Able to restore to any state of the user.
** Cons: Harder to implement as support for converting data of user to XML format needs to be added.
* **Alternative 2:** Saves only the staged modules.
** Pros: Will use less storage space (saving only staged module vs saving all user data).
** Cons: Does not restore the state of the user entirely.
// end::saveuser[]

// tag::datasecurity[]
=== Data Security Feature
The data security feature mainly involves the encryption of the user data file when using the `save` command and the decryption of a user data file when logging in using the `login` command. +

[NOTE]
Advanced Encryption Standard (AES) is the algorithm used for encryption.

This section will describe in details the current implementation and the design considerations of the data encryption & decryption feature.

---
==== Current Implementation
The data security feature is facilitated by `DataSecurityUtil` class. +
It implements the following operations(s):

* `DataSecurityUtil#encrypt(…​)` — Encrypts a `byte[]` with the specified password and returns the encrypted `byte[]`.
* `DataSecurityUtil#decrypt(…​)` — Decrypts a `byte[]` with the specified password and returns the decrypted `byte[]`.

`DataSecurityUtil` class utilizes `javax.crypto.cipher` and `javax.crypto.spec.SecretKeySpec` packages for the operations mentioned above.

The `Hashing` class is used to generate a SHA-1 hash to ensure that there are at least 16 bytes (128 bits) which are required to generate `SecretKeySpec`.

Both encryption and decryption is performed in `XMLAdaptedUser`.

===== Implementation of the encryption feature

The encryption feature is integrated with the save user feature (3.6).

During the conversion of a `User` object to XML, the encryption is performed in `XMLAdapterUser`, right before the file is written locally.
Currently, we only encrypt the `Username` (for all users) and `Salary` (for administrators).

The following code snippet shown below illustrates the encryption process:

[source, java]
----
public XmlAdaptedUser(User user, String password) {
    // ... null checks ...


    // All users
    this.username = DataSecurityUtil.bytesToBase64(DataSecurityUtil.encrypt(
            user.getUsername().toString().getBytes(), password));
    this.name = user.getName().toString();
    this.role = user.getRole().toString();
    this.pathToProfilePic = user.getPathToProfilePic().toString();


    // Admin
    if (user.getRole() == Role.ADMIN) {
        Admin admin = (Admin) user;
        this.salary = DataSecurityUtil.bytesToBase64(DataSecurityUtil.encrypt(
                admin.getSalary().toString().getBytes(), password));
        this.employmentDate = admin.getEmploymentDate().toString();
    }

    // ... removed for brevity ...
}
----

The sequence diagram shown below in Figure 1 illustrates the integration of encryption with the save user feature.

image::SequenceDiagramforSaveEventHandlingWithEncryption.png[width="650"]
_Figure 1. Sequence Diagram for the interaction between EventsCenter and Storage Components when executing SaveCommand with encryption_


===== Implementation of the decryption feature
The decryption feature is integrated with the login feature under user account management(3.1). +

When `LoginCommand` calls `model.readUser(...)` the loading of user file will commence and the decryption will occur in `XMLAdapterUser#toModelType(...)`.

This is shown in the following code snippets below:

[source, java]
----
public User toModelType(String password) throws IllegalValueException, CorruptedFileException,
        NoSuchPaddingException, InvalidPasswordException, NoSuchAlgorithmException, InvalidKeyException {
    User user = null;
    checkMandatoryFields();

    String decryptedUsername = decryptUsername(password);

    if ("ADMIN".equals(role)) {
        checkAdminFields();
        String decryptedSalary = decryptSalary(password);
        user = new Admin(new Username(decryptedUsername), new Name(name), Role.ADMIN, new Salary(decryptedSalary),
                new EmployDate(employmentDate));
    }
    // ... removed for brevity ...

    return user;
}
----

The code snippets of `decryptUsername(...)` and `decryptSalary(...)` is as follows:

[source, java]
----
private String decryptUsername(String password) throws NoSuchAlgorithmException, InvalidKeyException,
        InvalidPasswordException, CorruptedFileException, NoSuchPaddingException {
    return new String(DataSecurityUtil.decrypt(
            DataSecurityUtil.base64ToBytes(username), password), StandardCharsets.UTF_8);
}

 private String decryptSalary(String password) throws NoSuchAlgorithmException, InvalidKeyException,
            InvalidPasswordException, CorruptedFileException, NoSuchPaddingException {
    return new String(DataSecurityUtil.decrypt(
            DataSecurityUtil.base64ToBytes(salary), password), StandardCharsets.UTF_8);
 }
----

The sequence diagram shown below in Figure 2 illustrates the integration of decryption with the login feature.

image::SDforSaveCommandLogicAndModelUserDecryption.png[width="900"]
_Figure 2. Sequence Diagram for the interaction between Logic Component and DataSecurityUtil when executing LoginCommand_

==== Design Considerations

===== Aspect: How encryption is implemented

* **Alternative 1 (current choice):** Implement as an in-built feature.
** Pros: Ensures that the confidentiality of a user's data file is preserved at all times.
** Cons: Users do not have full control.
* **Alternative 2:** Implement as a command.
** Pros: Users will have more control on the data security.
** Cons: Unable to enforce the data security of the application.

===== Aspect: Generation of security key for encryption/decryption

* **Alternative 1 (current choice):** Generate the key using a user's password.
** Pros: User does not need to supply additional information or file for encryption/decryption.
** Cons: User is unable to decrypt their user data file if they forget their password.
* **Alternative 2:** Generate the key using `KeyGenerator` and an additional file is needed to log in.
** Pros: The key will be more secured compared to the key generated from alternative 1.
** Cons: User is unable to decrypt their user data file if the key file is lost or corrupted.

===== Aspect: What fields to encrypt

* **Alternative 1 (current choice):** Encrypt some fields (Username and Salary).
** Pros: Encryption of username ensures that a malicious user is unable to correlate a specific user data file to a credential in the credential store.
In addition, advance users are able to edit unencrypted fields in the user data file.
** Cons: Not all information are encrypted.
* **Alternative 2:** Encrypt every field.
** Pros: All user data is secure due to encryption.
** Cons: Advance users are unable to manually edit from the user data file.


// end::datasecurity[]

// tag::loaduser[]
=== Load User feature
The load user feature involves mainly the loading process of a user's attributes.
This feature is integrated into the `login` command, however it functions independently from authentication process.

This section will describe in details the current implementation and the design considerations of the load user feature.

==== Current Implementation
The load mechanism is facilitated by the `UserStorage` class.

It provides a method to load the user's attributes from a saved file. +
The following operation is used for the loading process:

`StorageManager#readUser(…​)` — Reads the user's data from the specified file path.

===== Implementation of the save feature

The load mechanism of modsUni is facilitated by `LoginCommand` class and is event-driven.
It allows a user to load their data in modsUni from a XML file.

The load feature uses multiple components of the modsUni application.
Parsing of command is performed by LoginCommandParser, which returns a LoginCommand object after parsing the save file path.

The sequence diagram shown below in Figure 1 illustrates the interactions between some of these components.

image::SequenceDiagramforLoginLoad.png[width="800"]
_Figure 1. Sequence Diagram for the interaction between Logic and Model Components when executing LoginCommand_

image::SDforLoginCommandOverviewWithLoad.png[width="800"]
_Figure 2. High-Level Sequence Diagram of the login process._

The Storage component makes use of `XmlUserStorage` class to read `User` from the file specified by the file path.
The conversion from `XmlSerializableUser` to `User` object is shown in the following code snippet below:

[source, java]
----
public Optional<User> readUser(Path filePath, String password) throws DataConversionException, FileNotFoundException {
    // ... null checks ...

    XmlSerializableUser xmlUser = XmlFileStorage.loadUserDataFromSaveFile(filePath);
    try {
        return Optional.of(xmlUser.toModelType(...));
    } catch (IllegalValueException ive) {
        logger.info("Illegal values found in " + filePath + ": " + ive.getMessage());
        throw new DataConversionException(ive);
    }
}
----
The method `XmlFileStorage#loadUserDataFromSaveFile(...)` as shown in the code snipplets below:

[source, java]
----
public static XmlSerializableUser loadUserDataFromSaveFile(Path file) throws DataConversionException, FileNotFoundException {
    try {
        return XmlUtil.getDataFromFile(file, XmlSerializableUser.class);
    } catch (JAXBException e) {
        throw new DataConversionException(e);
    }
}
----


---
Given below is an example usage scenario and how the save mechanism behaves:

1. A student will use the login command to log into their account.

2. Upon issuing the login command , the login command will call `Model#readUserFile(...)` which then loads the file into an `XmlSerializableUser` using `XmlFileStorage.loadUserDataFromSaveFile(...)`.

3. The `XmlSerializableUser` object is then converted to an `User` object using the  `XmlSerializableUser#toModelType(...)`.

==== Design Considerations

===== Aspect: Load command

* **Alternative 1 (current choice):** Loads file together with login.
** Pros: Able to load a user saved file without entering an additional command.
** Cons: Reduce flexibility.
* **Alternative 2:** Load file using an independent load command.
** Pros: More control over when a file is loaded..
** Cons: Additional command which may lead to more bug.
// end::loaduser[]

=== Logging

We are using `java.util.logging` package for logging. The `LogsCenter` class is used to manage the logging levels and logging destinations.

* The logging level can be controlled using the `logLevel` setting in the configuration file (See <<Implementation-Configuration>>)
* The `Logger` for a class can be obtained using `LogsCenter.getLogger(Class)` which will log messages according to the specified logging level
* Currently log messages are output through: `Console` and to a `.log` file.

*Logging Levels*

* `SEVERE` : Critical problem detected which may possibly cause the termination of the application
* `WARNING` : Can continue, but with caution
* `INFO` : Information showing the noteworthy actions by the App
* `FINE` : Details that is not usually noteworthy but may be useful in debugging e.g. print the actual list instead of just its size

[[Implementation-Configuration]]
=== Configuration

Certain properties of the application can be controlled (e.g App name, logging level) through the configuration file (default: `config.json`).

== Documentation

We use asciidoc for writing documentation.

[NOTE]
We chose asciidoc over Markdown because asciidoc, although a bit more complex than Markdown, provides more flexibility in formatting.

=== Editing Documentation

See <<UsingGradle#rendering-asciidoc-files, UsingGradle.adoc>> to learn how to render `.adoc` files locally to preview the end result of your edits.
Alternatively, you can download the AsciiDoc plugin for IntelliJ, which allows you to preview the changes you have made to your `.adoc` files in real-time.

=== Publishing Documentation

See <<UsingTravis#deploying-github-pages, UsingTravis.adoc>> to learn how to deploy GitHub Pages using Travis.

=== Converting Documentation to PDF format

We use https://www.google.com/chrome/browser/desktop/[Google Chrome] for converting documentation to PDF format, as Chrome's PDF engine preserves hyperlinks used in webpages.

Here are the steps to convert the project documentation files to PDF format.

.  Follow the instructions in <<UsingGradle#rendering-asciidoc-files, UsingGradle.adoc>> to convert the AsciiDoc files in the `docs/` directory to HTML format.
.  Go to your generated HTML files in the `build/docs` folder, right click on them and select `Open with` -> `Google Chrome`.
.  Within Chrome, click on the `Print` option in Chrome's menu.
.  Set the destination to `Save as PDF`, then click `Save` to save a copy of the file in PDF format. For best results, use the settings indicated in the screenshot below.

.Saving documentation as PDF files in Chrome
image::chrome_save_as_pdf.png[width="300"]

[[Docs-SiteWideDocSettings]]
=== Site-wide Documentation Settings

The link:{repoURL}/build.gradle[`build.gradle`] file specifies some project-specific https://asciidoctor.org/docs/user-manual/#attributes[asciidoc attributes] which affects how all documentation files within this project are rendered.

[TIP]
Attributes left unset in the `build.gradle` file will use their *default value*, if any.

[cols="1,2a,1", options="header"]
.List of site-wide attributes
|===
|Attribute name |Description |Default value

|`site-name`
|The name of the website.
If set, the name will be displayed near the top of the page.
|_not set_

|`site-githuburl`
|URL to the site's repository on https://github.com[GitHub].
Setting this will add a "View on GitHub" link in the navigation bar.
|_not set_

|`site-seedu`
|Define this attribute if the project is an official SE-EDU project.
This will render the SE-EDU navigation bar at the top of the page, and add some SE-EDU-specific navigation items.
|_not set_

|===

[[Docs-PerFileDocSettings]]
=== Per-file Documentation Settings

Each `.adoc` file may also specify some file-specific https://asciidoctor.org/docs/user-manual/#attributes[asciidoc attributes] which affects how the file is rendered.

Asciidoctor's https://asciidoctor.org/docs/user-manual/#builtin-attributes[built-in attributes] may be specified and used as well.

[TIP]
Attributes left unset in `.adoc` files will use their *default value*, if any.

[cols="1,2a,1", options="header"]
.List of per-file attributes, excluding Asciidoctor's built-in attributes
|===
|Attribute name |Description |Default value

|`site-section`
|Site section that the document belongs to.
This will cause the associated item in the navigation bar to be highlighted.
One of: `UserGuide`, `DeveloperGuide`, ``LearningOutcomes``{asterisk}, `AboutUs`, `ContactUs`

_{asterisk} Official SE-EDU projects only_
|_not set_

|`no-site-header`
|Set this attribute to remove the site navigation bar.
|_not set_

|===

=== Site Template

The files in link:{repoURL}/docs/stylesheets[`docs/stylesheets`] are the https://developer.mozilla.org/en-US/docs/Web/CSS[CSS stylesheets] of the site.
You can modify them to change some properties of the site's design.

The files in link:{repoURL}/docs/templates[`docs/templates`] controls the rendering of `.adoc` files into HTML5.
These template files are written in a mixture of https://www.ruby-lang.org[Ruby] and http://slim-lang.com[Slim].

[WARNING]
====
Modifying the template files in link:{repoURL}/docs/templates[`docs/templates`] requires some knowledge and experience with Ruby and Asciidoctor's API.
You should only modify them if you need greater control over the site's layout than what stylesheets can provide.
The SE-EDU team does not provide support for modified template files.
====

[[Testing]]
== Testing

=== Running Tests

There are three ways to run tests.

[TIP]
The most reliable way to run tests is the 3rd one. The first two methods might fail some GUI tests due to platform/resolution-specific idiosyncrasies.

*Method 1: Using IntelliJ JUnit test runner*

* To run all tests, right-click on the `src/test/java` folder and choose `Run 'All Tests'`
* To run a subset of tests, you can right-click on a test package, test class, or a test and choose `Run 'ABC'`

*Method 2: Using Gradle*

* Open a console and run the command `gradlew clean allTests` (Mac/Linux: `./gradlew clean allTests`)

[NOTE]
See <<UsingGradle#, UsingGradle.adoc>> for more info on how to run tests using Gradle.

*Method 3: Using Gradle (headless)*

Thanks to the https://github.com/TestFX/TestFX[TestFX] library we use, our GUI tests can be run in the _headless_ mode. In the headless mode, GUI tests do not show up on the screen. That means the developer can do other things on the Computer while the tests are running.

To run tests in headless mode, open a console and run the command `gradlew clean headless allTests` (Mac/Linux: `./gradlew clean headless allTests`)

=== Types of tests

We have two types of tests:

.  *GUI Tests* - These are tests involving the GUI. They include,
.. _System Tests_ that test the entire App by simulating user actions on the GUI. These are in the `systemtests` package.
.. _Unit tests_ that test the individual components. These are in `seedu.modsuni.ui` package.
.  *Non-GUI Tests* - These are tests not involving the GUI. They include,
..  _Unit tests_ targeting the lowest level methods/classes. +
e.g. `seedu.modsuni.commons.StringUtilTest`
..  _Integration tests_ that are checking the integration of multiple code units (those code units are assumed to be working). +
e.g. `seedu.modsuni.storage.StorageManagerTest`
..  Hybrids of unit and integration tests. These test are checking multiple code units as well as how the are connected together. +
e.g. `seedu.modsuni.logic.LogicManagerTest`


=== Troubleshooting Testing
**Problem: `HelpWindowTest` fails with a `NullPointerException`.**

* Reason: One of its dependencies, `HelpWindow.html` in `src/main/resources/docs` is missing.
* Solution: Execute Gradle task `processResources`.

== Dev Ops

=== Build Automation

See <<UsingGradle#, UsingGradle.adoc>> to learn how to use Gradle for build automation.

=== Continuous Integration

We use https://travis-ci.org/[Travis CI] and https://www.appveyor.com/[AppVeyor] to perform _Continuous Integration_ on our projects. See <<UsingTravis#, UsingTravis.adoc>> and <<UsingAppVeyor#, UsingAppVeyor.adoc>> for more details.

=== Coverage Reporting

We use https://coveralls.io/[Coveralls] to track the code coverage of our projects. See <<UsingCoveralls#, UsingCoveralls.adoc>> for more details.

=== Documentation Previews
When a pull request has changes to asciidoc files, you can use https://www.netlify.com/[Netlify] to see a preview of how the HTML version of those asciidoc files will look like when the pull request is merged. See <<UsingNetlify#, UsingNetlify.adoc>> for more details.

=== Making a Release

Here are the steps to create a new release.

.  Update the version number in link:{repoURL}/src/main/java/seedu/modsuni/MainApp.java[`MainApp.java`].
.  Generate a JAR file <<UsingGradle#creating-the-jar-file, using Gradle>>.
.  Tag the repo with the version number. e.g. `v0.1`
.  https://help.github.com/articles/creating-releases/[Create a new release using GitHub] and upload the JAR file you created.

=== Managing Dependencies

A project often depends on third-party libraries. For example, Address Book depends on the http://wiki.fasterxml.com/JacksonHome[Jackson library] for XML parsing. Managing these _dependencies_ can be automated using Gradle. For example, Gradle can download the dependencies automatically, which is better than these alternatives. +
a. Include those libraries in the repo (this bloats the repo size) +
b. Require developers to download those libraries manually (this creates extra work for developers)

[[GetStartedProgramming]]
[appendix]
== Suggested Programming Tasks to Get Started

Suggested path for new programmers:

1. First, add small local-impact (i.e. the impact of the change does not go beyond the component) enhancements to one component at a time. Some suggestions are given in <<GetStartedProgramming-EachComponent>>.

2. Next, add a feature that touches multiple components to learn how to implement an end-to-end feature across all components. <<GetStartedProgramming-RemarkCommand>> explains how to go about adding such a feature.

[[GetStartedProgramming-EachComponent]]
=== Improving each component

Each individual exercise in this section is component-based (i.e. you would not need to modify the other components to get it to work).

[discrete]
==== `Logic` component

*Scenario:* You are in charge of `logic`. During dog-fooding, your team realize that it is troublesome for the user to type the whole command in order to execute a command. Your team devise some strategies to help cut down the amount of typing necessary, and one of the suggestions was to implement aliases for the command words. Your job is to implement such aliases.

[TIP]
Do take a look at <<Design-Logic>> before attempting to modify the `Logic` component.

. Add a shorthand equivalent alias for each of the individual commands. For example, besides typing `clear`, the user can also type `c` to remove all persons in the list.
+
****
* Hints
** Just like we store each individual command word constant `COMMAND_WORD` inside `*Command.java` (e.g.  link:{repoURL}/src/main/java/seedu/modsuni/logic/commands/FindCommand.java[`FindCommand#COMMAND_WORD`], link:{repoURL}/src/main/java/seedu/address/logic/commands/DeleteCommand.java[`DeleteCommand#COMMAND_WORD`]), you need a new constant for aliases as well (e.g. `FindCommand#COMMAND_ALIAS`).
** link:{repoURL}/src/main/java/seedu/modsuni/logic/parser/ModsUniParser.java[`ModsUniParser`] is responsible for analyzing command words.
* Solution
** Modify the switch statement in link:{repoURL}/src/main/java/seedu/modsuni/logic/parser/ModsUniParser.java[`ModsUniParser#parseCommand(String)`] such that both the proper command word and alias can be used to execute the same intended command.
** Add new tests for each of the aliases that you have added.
** Update the user guide to document the new aliases.
** See this https://github.com/se-edu/addressbook-level4/pull/785[PR] for the full solution.
****

[discrete]
==== `Model` component

*Scenario:* You are in charge of `model`. One day, the `logic`-in-charge approaches you for help. He wants to implement a command such that a student is able to remove all modules in a particular module list, but the model API does not support such a functionality at the moment. Your job is to implement an API method, so that your teammate can use your API to implement his command.

[TIP]
Do take a look at <<Design-Model>> before attempting to modify the `Model` component.

. Add a `removeAllStagedModules()` method.
. Add a `removeAllTakenModules()` method.
+
****
* Hints
** The link:{repoURL}/src/main/java/seedu/modsuni/model/Model.java[`Model`] and link:{repoURL}/src/main/java/seedu/modsuni/model/user/student/Student.java[`Student`] API need to be updated.
** Think about how you can use SLAP to design the method. Where should we place the main logic of deleting the modules?
**  Find out which of the existing API methods in  link:{repoURL}/src/main/java/seedu/modsuni/model/ModelManager.java[`AddressBook`] and link:{repoURL}/src/main/java/seedu/modsuni/model/user/student/Student.java[`Student`] classes can be used to implement the module list removal logic. link:{repoURL}/src/main/java/seedu/modsuni/model/ModelManager.java[`ModelManager`] allows you to update the various module lists, and link:{repoURL}/src/main/java/seedu/modsuni/model/user/student/Student.java[`Student`] allows you to update the module lists.
* Solution
** Implement a `removeAllXXXModules()` method in link:{repoURL}/src/main/java/seedu/modsuni/model/ModelManager.java[`ModelManager`]. Reinitialise the respective list.
** Add a new API method `removeAllXXXModules()` in link:{repoURL}/src/main/java/seedu/modsuni/model/student/Student.java[`Student`]. Your link:{repoURL}/src/main/java/seedu/address/model/ModelManager.java[`ModelManager`] should call `Student#removeAllXXXModules()`.
** Add new tests for each of the new public methods that you have added.
** See this https://github.com/se-edu/addressbook-level4/pull/790[PR] for the full solution.
****

[discrete]
==== `Ui` component

*Scenario:* You are in charge of `ui`. During a beta testing session, your team is observing how the users use your address book application. You realize that one of the users occasionally tries to delete non-existent tags from a contact, because the tags all look the same visually, and the user got confused. Another user made a typing mistake in his command, but did not realize he had done so because the error message wasn't prominent enough. A third user keeps scrolling down the list, because he keeps forgetting the index of the last person in the list. Your job is to implement improvements to the UI to solve all these problems.

[TIP]
Do take a look at <<Design-Ui>> before attempting to modify the `UI` component.

. Use different colors for different tags inside person cards. For example, `friends` tags can be all in brown, and `colleagues` tags can be all in yellow.
+
**Before**
+
image::getting-started-ui-tag-before.png[width="300"]
+
**After**
+
image::getting-started-ui-tag-after.png[width="300"]
+
****
* Hints
** The tag labels are created inside link:{repoURL}/src/main/java/seedu/address/ui/PersonCard.java[the `PersonCard` constructor] (`new Label(tag.tagName)`). https://docs.oracle.com/javase/8/javafx/api/javafx/scene/control/Label.html[JavaFX's `Label` class] allows you to modify the style of each Label, such as changing its color.
** Use the .css attribute `-fx-background-color` to add a color.
** You may wish to modify link:{repoURL}/src/main/resources/view/DarkTheme.css[`DarkTheme.css`] to include some pre-defined colors using css, especially if you have experience with web-based css.
* Solution
** You can modify the existing test methods for `PersonCard` 's to include testing the tag's color as well.
** See this https://github.com/se-edu/addressbook-level4/pull/798[PR] for the full solution.
*** The PR uses the hash code of the tag names to generate a color. This is deliberately designed to ensure consistent colors each time the application runs. You may wish to expand on this design to include additional features, such as allowing users to set their own tag colors, and directly saving the colors to storage, so that tags retain their colors even if the hash code algorithm changes.
****

. Modify link:{repoURL}/src/main/java/seedu/address/commons/events/ui/NewResultAvailableEvent.java[`NewResultAvailableEvent`] such that link:{repoURL}/src/main/java/seedu/address/ui/ResultDisplay.java[`ResultDisplay`] can show a different style on error (currently it shows the same regardless of errors).
+
**Before**
+
image::getting-started-ui-result-before.png[width="200"]
+
**After**
+
image::getting-started-ui-result-after.png[width="200"]
+
****
* Hints
** link:{repoURL}/src/main/java/seedu/address/commons/events/ui/NewResultAvailableEvent.java[`NewResultAvailableEvent`] is raised by link:{repoURL}/src/main/java/seedu/address/ui/CommandBox.java[`CommandBox`] which also knows whether the result is a success or failure, and is caught by link:{repoURL}/src/main/java/seedu/address/ui/ResultDisplay.java[`ResultDisplay`] which is where we want to change the style to.
** Refer to link:{repoURL}/src/main/java/seedu/address/ui/CommandBox.java[`CommandBox`] for an example on how to display an error.
* Solution
** Modify link:{repoURL}/src/main/java/seedu/address/commons/events/ui/NewResultAvailableEvent.java[`NewResultAvailableEvent`] 's constructor so that users of the event can indicate whether an error has occurred.
** Modify link:{repoURL}/src/main/java/seedu/address/ui/ResultDisplay.java[`ResultDisplay#handleNewResultAvailableEvent(NewResultAvailableEvent)`] to react to this event appropriately.
** You can write two different kinds of tests to ensure that the functionality works:
*** The unit tests for `ResultDisplay` can be modified to include verification of the color.
*** The system tests link:{repoURL}/src/test/java/systemtests/AddressBookSystemTest.java[`AddressBookSystemTest#assertCommandBoxShowsDefaultStyle() and AddressBookSystemTest#assertCommandBoxShowsErrorStyle()`] to include verification for `ResultDisplay` as well.
** See this https://github.com/se-edu/addressbook-level4/pull/799[PR] for the full solution.
*** Do read the commits one at a time if you feel overwhelmed.
****

. Modify the link:{repoURL}/src/main/java/seedu/address/ui/StatusBarFooter.java[`StatusBarFooter`] to show the total number of people in the address book.
+
**Before**
+
image::getting-started-ui-status-before.png[width="500"]
+
**After**
+
image::getting-started-ui-status-after.png[width="500"]
+
****
* Hints
** link:{repoURL}/src/main/resources/view/StatusBarFooter.fxml[`StatusBarFooter.fxml`] will need a new `StatusBar`. Be sure to set the `GridPane.columnIndex` properly for each `StatusBar` to avoid misalignment!
** link:{repoURL}/src/main/java/seedu/address/ui/StatusBarFooter.java[`StatusBarFooter`] needs to initialize the status bar on application start, and to update it accordingly whenever the address book is updated.
* Solution
** Modify the constructor of link:{repoURL}/src/main/java/seedu/address/ui/StatusBarFooter.java[`StatusBarFooter`] to take in the number of persons when the application just started.
** Use link:{repoURL}/src/main/java/seedu/address/ui/StatusBarFooter.java[`StatusBarFooter#handleAddressBookChangedEvent(AddressBookChangedEvent)`] to update the number of persons whenever there are new changes to the addressbook.
** For tests, modify link:{repoURL}/src/test/java/guitests/guihandles/StatusBarFooterHandle.java[`StatusBarFooterHandle`] by adding a state-saving functionality for the total number of people status, just like what we did for save location and sync status.
** For system tests, modify link:{repoURL}/src/test/java/systemtests/AddressBookSystemTest.java[`AddressBookSystemTest`] to also verify the new total number of persons status bar.
** See this https://github.com/se-edu/addressbook-level4/pull/803[PR] for the full solution.
****

[discrete]
==== `Storage` component

*Scenario:* You are in charge of `storage`. For your next project milestone, your team plans to implement a new feature of saving the address book to the cloud. However, the current implementation of the application constantly saves the address book after the execution of each command, which is not ideal if the user is working on limited internet connection. Your team decided that the application should instead save the changes to a temporary local backup file first, and only upload to the cloud after the user closes the application. Your job is to implement a backup API for the address book storage.

[TIP]
Do take a look at <<Design-Storage>> before attempting to modify the `Storage` component.

. Add a new method `backupAddressBook(ReadOnlyAddressBook)`, so that the address book can be saved in a fixed temporary location.
+
****
* Hint
** Add the API method in link:{repoURL}/src/main/java/seedu/address/storage/AddressBookStorage.java[`AddressBookStorage`] interface.
** Implement the logic in link:{repoURL}/src/main/java/seedu/address/storage/StorageManager.java[`StorageManager`] and link:{repoURL}/src/main/java/seedu/address/storage/XmlAddressBookStorage.java[`XmlAddressBookStorage`] class.
* Solution
** See this https://github.com/se-edu/addressbook-level4/pull/594[PR] for the full solution.
****

[[GetStartedProgramming-RemarkCommand]]
=== Creating a new command: `remark`

By creating this command, you will get a chance to learn how to implement a feature end-to-end, touching all major components of the app.

*Scenario:* You are a software maintainer for `addressbook`, as the former developer team has moved on to new projects. The current users of your application have a list of new feature requests that they hope the software will eventually have. The most popular request is to allow adding additional comments/notes about a particular contact, by providing a flexible `remark` field for each contact, rather than relying on tags alone. After designing the specification for the `remark` command, you are convinced that this feature is worth implementing. Your job is to implement the `remark` command.

==== Description
Edits the remark for a person specified in the `INDEX`. +
Format: `remark INDEX r/[REMARK]`

Examples:

* `remark 1 r/Likes to drink coffee.` +
Edits the remark for the first person to `Likes to drink coffee.`
* `remark 1 r/` +
Removes the remark for the first person.

==== Step-by-step Instructions

===== [Step 1] Logic: Teach the app to accept 'remark' which does nothing
Let's start by teaching the application how to parse a `remark` command. We will add the logic of `remark` later.

**Main:**

. Add a `RemarkCommand` that extends link:{repoURL}/src/main/java/seedu/address/logic/commands/Command.java[`Command`]. Upon execution, it should just throw an `Exception`.
. Modify link:{repoURL}/src/main/java/seedu/address/logic/parser/AddressBookParser.java[`AddressBookParser`] to accept a `RemarkCommand`.

**Tests:**

. Add `RemarkCommandTest` that tests that `execute()` throws an Exception.
. Add new test method to link:{repoURL}/src/test/java/seedu/address/logic/parser/AddressBookParserTest.java[`AddressBookParserTest`], which tests that typing "remark" returns an instance of `RemarkCommand`.

===== [Step 2] Logic: Teach the app to accept 'remark' arguments
Let's teach the application to parse arguments that our `remark` command will accept. E.g. `1 r/Likes to drink coffee.`

**Main:**

. Modify `RemarkCommand` to take in an `Index` and `String` and print those two parameters as the error message.
. Add `RemarkCommandParser` that knows how to parse two arguments, one index and one with prefix 'r/'.
. Modify link:{repoURL}/src/main/java/seedu/address/logic/parser/AddressBookParser.java[`AddressBookParser`] to use the newly implemented `RemarkCommandParser`.

**Tests:**

. Modify `RemarkCommandTest` to test the `RemarkCommand#equals()` method.
. Add `RemarkCommandParserTest` that tests different boundary values
for `RemarkCommandParser`.
. Modify link:{repoURL}/src/test/java/seedu/address/logic/parser/AddressBookParserTest.java[`AddressBookParserTest`] to test that the correct command is generated according to the user input.

===== [Step 3] Ui: Add a placeholder for remark in `PersonCard`
Let's add a placeholder on all our link:{repoURL}/src/main/java/seedu/address/ui/PersonCard.java[`PersonCard`] s to display a remark for each person later.

**Main:**

. Add a `Label` with any random text inside link:{repoURL}/src/main/resources/view/PersonListCard.fxml[`PersonListCard.fxml`].
. Add FXML annotation in link:{repoURL}/src/main/java/seedu/address/ui/PersonCard.java[`PersonCard`] to tie the variable to the actual label.

**Tests:**

. Modify link:{repoURL}/src/test/java/guitests/guihandles/PersonCardHandle.java[`PersonCardHandle`] so that future tests can read the contents of the remark label.

===== [Step 4] Model: Add `Remark` class
We have to properly encapsulate the remark in our link:{repoURL}/src/main/java/seedu/address/model/person/Person.java[`Person`] class. Instead of just using a `String`, let's follow the conventional class structure that the codebase already uses by adding a `Remark` class.

**Main:**

. Add `Remark` to model component (you can copy from link:{repoURL}/src/main/java/seedu/address/model/person/Address.java[`Address`], remove the regex and change the names accordingly).
. Modify `RemarkCommand` to now take in a `Remark` instead of a `String`.

**Tests:**

. Add test for `Remark`, to test the `Remark#equals()` method.

===== [Step 5] Model: Modify `Person` to support a `Remark` field
Now we have the `Remark` class, we need to actually use it inside link:{repoURL}/src/main/java/seedu/address/model/person/Person.java[`Person`].

**Main:**

. Add `getRemark()` in link:{repoURL}/src/main/java/seedu/address/model/person/Person.java[`Person`].
. You may assume that the user will not be able to use the `add` and `edit` commands to modify the remarks field (i.e. the person will be created without a remark).
. Modify link:{repoURL}/src/main/java/seedu/address/model/util/SampleDataUtil.java/[`SampleDataUtil`] to add remarks for the sample data (delete your `addressBook.xml` so that the application will load the sample data when you launch it.)

===== [Step 6] Storage: Add `Remark` field to `XmlAdaptedPerson` class
We now have `Remark` s for `Person` s, but they will be gone when we exit the application. Let's modify link:{repoURL}/src/main/java/seedu/address/storage/XmlAdaptedPerson.java[`XmlAdaptedPerson`] to include a `Remark` field so that it will be saved.

**Main:**

. Add a new Xml field for `Remark`.

**Tests:**

. Fix `invalidAndValidPersonAddressBook.xml`, `typicalPersonsAddressBook.xml`, `validAddressBook.xml` etc., such that the XML tests will not fail due to a missing `<remark>` element.

===== [Step 6b] Test: Add withRemark() for `PersonBuilder`
Since `Person` can now have a `Remark`, we should add a helper method to link:{repoURL}/src/test/java/seedu/address/testutil/PersonBuilder.java[`PersonBuilder`], so that users are able to create remarks when building a link:{repoURL}/src/main/java/seedu/address/model/person/Person.java[`Person`].

**Tests:**

. Add a new method `withRemark()` for link:{repoURL}/src/test/java/seedu/address/testutil/PersonBuilder.java[`PersonBuilder`]. This method will create a new `Remark` for the person that it is currently building.
. Try and use the method on any sample `Person` in link:{repoURL}/src/test/java/seedu/address/testutil/TypicalPersons.java[`TypicalPersons`].

===== [Step 7] Ui: Connect `Remark` field to `PersonCard`
Our remark label in link:{repoURL}/src/main/java/seedu/address/ui/PersonCard.java[`PersonCard`] is still a placeholder. Let's bring it to life by binding it with the actual `remark` field.

**Main:**

. Modify link:{repoURL}/src/main/java/seedu/address/ui/PersonCard.java[`PersonCard`]'s constructor to bind the `Remark` field to the `Person` 's remark.

**Tests:**

. Modify link:{repoURL}/src/test/java/seedu/address/ui/testutil/GuiTestAssert.java[`GuiTestAssert#assertCardDisplaysPerson(...)`] so that it will compare the now-functioning remark label.

===== [Step 8] Logic: Implement `RemarkCommand#execute()` logic
We now have everything set up... but we still can't modify the remarks. Let's finish it up by adding in actual logic for our `remark` command.

**Main:**

. Replace the logic in `RemarkCommand#execute()` (that currently just throws an `Exception`), with the actual logic to modify the remarks of a person.

**Tests:**

. Update `RemarkCommandTest` to test that the `execute()` logic works.

==== Full Solution

See this https://github.com/se-edu/addressbook-level4/pull/599[PR] for the step-by-step solution.

[appendix]
== Product Scope

*Target user profile*:
NUS undergraduates, in particular, a freshman who has just started their candidature and have absolutely no idea how to plan their modules.

*Value proposition*:
A candidature planner for NUS Undergraduates to assist them in their module planning process.

[appendix]
== User Stories

Priorities: High (must have) - `* * \*`, Medium (nice to have) - `* \*`, Low (unlikely to have) - `*`

[width="59%",cols="22%,<23%,<25%,<30%",options="header",]
|=======================================================================
|Priority |As a ... |I want to ... |So that...
|`* * *` |student |my search queries to be case-insensitive |I can type commands faster
|`* * *` |student |be able to know the total workload of the modules |I will not overload
|`* * *` |student |set a preferred semester to take a module |I can take it with friends
|`* * *` |student |remove modules |my schedule will be updated
|`* * *` |student |add in modules that I would like to take |it will be added into my schedule
|`* * *` |student |set a preferred max of semesters |I can I can graduate earlier
|`* * *` |student |add in modules that I’ve taken previously |I can see what modules I can take
|`* * *` |student |load my schedule |I do not need to plan it again
|`* * *` |user |see what commands are available |I know what i can do
|`* * *` |student |save my schedule |I do not need to plan it again
|`* * *` |student |search through a list of available modules |I can determine the exact module code
|`* * *` |student |check if my module plan is feasible |I know if I need to make any changes
|`* * *` |student |search for a module |I can find out details about it
|`* * *` |developer |be able to view all documentation on methods |I can include additional features in the future
|`* * *` |student |be able to see the prerequisite modules of a module |I can see what modules to take
|`* * *` |student |an application that is standalone |I do not have to download dependency
|`* * *` |student |be able to determine if I have preclusion to a module |i will not end up taking modules i am not suppose to take
|`* * *` |user |be able to contact the developer |I can report bugs to improve the software
|`* * *` |student |be able to generate a module planner |I can plan for my entire candidature in my respective university

|`**` |user |to customise the look of the software |it is pleasing to the eyes
|`**` |advanced user |to have auto complete commands |I do not need to type so much
|`**` |student |to be able to edit modules |I don't need to generate a new plan if I need to make any changes
|`**` |student |to search for a professor |I know what mods is he teaching
|`**` |student |to be warned of the timetable clashes |I will not make an unreasonable schedule
|`**` |student |my personal information to be stored securely |I am not subjected to identity theft
|`**` |developer |to be able to integrate my plugins |I can enhance user experience
|`**` |student |to be able to view student reviews on modules |I can better inform myself on what to expect of certain modules
|`**` |student |to be able to print the schedule |I can better store it

|`*` |user| to be able to store my settings in cloud| I can access them everywhere
|`*` |student |to be able to view exam schedules| I can better prepare for finals
|=======================================================================

[appendix]
== Use Cases

(For all use cases below, the *System* is the `modsUni` and the *Actor* is the `NUS Undergraduate`, unless specified otherwise)

[discrete]
=== Use case: Add module

*MSS*

1.  User starts up application
2.  User type in the relevant commands [`add <MOD_CODE>`]
+
Use case ends.

*Extensions*

[none]
* 1a. Load existing module configurations.
+
Use case ends.

[discrete]
=== Use case: Delete module

*MSS*

1.  User starts up application
2.  User type in the relevant commands [`remove <MOD_CODE>`]
+
Use case ends.

[discrete]
=== Use case: Generate Candidature Plan

*MSS*

1. User starts up application
2. User add module [UC01] using command line
3. User generate plan using relevant command [`generate`]
+
Use case ends.

*Extensions*

[none]
* 3a. Student able to generate plan based on years of candidature using relevant command [`generate <NUM_YEAR>year`].
+
Use case ends.

* 3b. Student able to generate plan based on specifying the semester in which a module is preferred to be taken using relevant command [`generate <MOD_CODE><SEMESTER>`]
Use case ends.

[discrete]
=== Use case: Search module

*MSS*

1. User type in the relevant command [search <KEYWORD>]
2. modsUni output search results in a list on the screen if any
+
Use case ends.

[discrete]
=== Use case: See prerequisites of a module

*MSS*

1. User type in the relevant command [`prereq <MODULE CODE>`]
2. System output the prerequisites for the module
+
Use case ends.

[discrete]
=== Use case: Load existing configuration

*MSS*

1. User starts up application
2. User type in the relevant command [`load <CONFIG_FILE>`]
+
Use case ends.

[appendix]
== Non Functional Requirements

.  Should work on any <<mainstream-os,mainstream OS>> as long as it has Java `9` or higher installed.
.  A user with above average typing speed for regular English text (i.e. not code, not system admin commands) should be able to accomplish most of the tasks faster using commands than using the mouse.
.  Should be able to generate a user’s schedule under less than 10 seconds.
.  Sensitive information (e.g. passwords) should not be saved in plaintext.
.  A user should be able to remove any personal identifiable information **(PII)** from the application.
.  An administrator should not be able to log in on behalf of a user.


[appendix]
== Glossary

[[cli]] CLI::
CLI is an acronym for Command Line Interface. It is a text-based interface which facilitates interaction between the user and the software.

[[mainstream-os]] Mainstream OS::
Windows, Linux, Unix, OS-X

[[module]] Modules::
Modules are classes on a specific set of topic, and assignments are often included to facilitate the learning process.
Each module has its own code and module name, when coupled acts as an unique identifier to the module.

[[user]] User::
There are two types of use mainly `Student` and `Administrator`. Each of them have different functions implemented based on their role.

[[xml]] XML::
XML represent eXtensible Markup Language. It is used to create a common information format which facilitates the sharing of information through different interfaces.

[appendix]
== Instructions for Manual Testing

Given below are instructions to test the app manually.

[NOTE]
These instructions only provide a starting point for testers to work on; testers are expected to do more _exploratory_ testing.

=== Launch and Shutdown

. Initial launch

.. Download the jar file and copy into an empty folder
.. Double-click the jar file +
   Expected: Shows the GUI with a set of sample contacts. The window size may not be optimum.

. Saving window preferences

.. Resize the window to an optimum size. Move the window to a different location. Close the window.
.. Re-launch the app by double-clicking the jar file. +
   Expected: The most recent window size and location is retained.

_{ more test cases ... }_

=== Deleting a person

. Deleting a person while all persons are listed

.. Prerequisites: List all persons using the `list` command. Multiple persons in the list.
.. Test case: `delete 1` +
   Expected: First contact is deleted from the list. Details of the deleted contact shown in the status message. Timestamp in the status bar is updated.
.. Test case: `delete 0` +
   Expected: No person is deleted. Error details shown in the status message. Status bar remains the same.
.. Other incorrect delete commands to try: `delete`, `delete x` (where x is larger than the list size) _{give more}_ +
   Expected: Similar to previous.

_{ more test cases ... }_

=== Saving data

. Dealing with missing/corrupted data files

.. _{explain how to simulate a missing/corrupted file and the expected behavior}_

_{ more test cases ... }_
